@model SistemaHotelero.Models.ViewModels.ReservaVM@{    ViewData["Title"] = "Registrar Reserva";    Layout = "~/Views/Shared/_Layout.cshtml";}<div class="container mt-4">    <div class="card shadow border-0 mb-4">        <div class="card-body">            <h5 class="fw-bold text-primary mb-3">Detalles de la Habitación</h5>            <div class="row mb-3">                <div class="col-md-2"><strong>Número:</strong><br />@Model.Habitacion.Numero</div>                <div class="col-md-2"><strong>Detalles:</strong><br />@Model.Habitacion.Detalle</div>                <div class="col-md-2"><strong>Categoría:</strong><br />@Model.Habitacion.Categoria?.Descripcion</div>                <div class="col-md-2"><strong>Piso:</strong><br />@Model.Habitacion.Piso?.Descripcion</div>                <div class="col-md-2"><strong>Precio por noche:</strong><br />$@Model.Habitacion.Precio.ToString("F2")</div>            </div>        </div>    </div>    <form asp-action="Registrar" method="post">        @Html.AntiForgeryToken()        <input type="hidden" asp-for="Recepcion.IdHabitacion" />        <input type="hidden" id="PrecioBaseHabitacion" value="@Model.Habitacion.Precio" />        <div class="card shadow border-0 mb-4">            <div class="card-body">                <h5 class="fw-bold text-primary mb-3">Selecionar Cliente</h5>                <div class="row">                    <div class="col-md-6">                        <div class="form-group">                            <label asp-for="Recepcion.IdApplicationUser" class="form-label">Cliente:</label>                            <select asp-for="Recepcion.IdApplicationUser" class="form-select" asp-items="Model.ListaClientes">                                <option value="">Seleccione un cliente</option>                            </select>                            <span asp-validation-for="Recepcion.IdApplicationUser" class="text-danger small"></span>                        </div>                    </div>                </div>            </div>        </div>        <div class="card shadow border-0 mb-4">            <div class="card-body">                <h5 class="fw-bold text-primary mb-3">Detalles de la Reservación</h5>                <div class="row">                    <div class="col-md-3">                        <div class="form-group">                            <label class="form-label">Fecha Entrada:</label>                            <input class="form-control" value="@DateTime.Now.ToString("yyyy-MM-dd")" readonly />                        </div>                    </div>                    <div class="col-md-3">                        <div class="form-group">                            <label asp-for="Recepcion.FechaSalida" class="form-label">Fecha Salida:</label>                            <input asp-for="Recepcion.FechaSalida" class="form-control" type="date" id="Recepcion_FechaSalida" />                            <span asp-validation-for="Recepcion.FechaSalida" class="text-danger small"></span>                        </div>                    </div>                    <div class="col-md-3">                        <div class="form-group">                            <label asp-for="Recepcion.PrecioInicial" class="form-label">Costo Total:</label>                            <input asp-for="Recepcion.PrecioInicial" class="form-control" readonly />                        </div>                    </div>                    <div class="col-md-3">                        <div class="form-group">                            <label asp-for="Recepcion.Adelanto" class="form-label">Adelanto:</label>                            <input asp-for="Recepcion.Adelanto" class="form-control" />                            <span asp-validation-for="Recepcion.Adelanto" class="text-danger small"></span>                        </div>                    </div>                </div>                <div class="row mt-3">                    <div class="col-md-12">                        <div class="form-group">                            <label asp-for="Recepcion.Observacion" class="form-label">Observación:</label>                            <textarea asp-for="Recepcion.Observacion" class="form-control" rows="3" placeholder="Ingrese cualquier observación adicional"></textarea>                        </div>                    </div>                </div>            </div>        </div>        <div class="text-end">            <a asp-action="Index" class="btn btn-secondary me-2">                <i class="fas fa-arrow-left me-1"></i> Volver            </a>            <button type="submit" class="btn btn-primary">                <i class="fas fa-save me-1"></i> Registrar Reserva            </button>        </div>    </form></div>@section Scripts {    <partial name="_ValidationScriptsPartial" />    <script>        $(document).ready(function () {            // Evitar selección de fechas pasadas            const hoy = new Date().toISOString().split("T")[0];            document.getElementById("Recepcion_FechaSalida").setAttribute("min", hoy);            // Precio            var precioBaseHabitacion = parseFloat($("#PrecioBaseHabitacion").val());            function calcularPrecioTotal() {                var fechaEntrada = new Date(); // hoy                var fechaSalida = new Date($("#Recepcion_FechaSalida").val());                if (!isNaN(fechaSalida) && fechaSalida > fechaEntrada) {                    var diffTime = fechaSalida - fechaEntrada;                    var diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));                    var precioTotal = precioBaseHabitacion * diffDays;                    $("#Recepcion_PrecioInicial").val(precioTotal.toFixed(2));                } else {                    $("#Recepcion_PrecioInicial").val(precioBaseHabitacion.toFixed(2));                }            }            calcularPrecioTotal();            $("#Recepcion_FechaSalida").change(function () {                calcularPrecioTotal();            });        });    </script>}
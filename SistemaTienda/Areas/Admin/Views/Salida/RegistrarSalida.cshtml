@model SistemaHotelero.Models.Recepcion@{    ViewData["Title"] = "Registrar Salida";    Layout = "~/Views/Shared/_Layout.cshtml";    var totalReserva = Model.Recepcion.PrecioInicial - Model.Recepcion.Adelanto;    var totalVentas = Model.TotalVentas;    var totalPagar = totalReserva + totalVentas;}<div class="container mt-4">    <div class="card shadow border-0 mb-4">        <div class="card-body">            <h5 class="fw-bold text-primary mb-3">Resumen de la Habitación</h5>            <div class="row mb-3">                <div class="col-md-2"><strong>Número:</strong><br />@Model.Recepcion.Habitacion.Numero</div>                <div class="col-md-2"><strong>Detalles:</strong><br />@Model.Recepcion.Habitacion.Detalle</div>                <div class="col-md-2"><strong>Categoría:</strong><br />@Model.Recepcion.Habitacion.Categoria?.Descripcion</div>                <div class="col-md-2"><strong>Piso:</strong><br />@Model.Recepcion.Habitacion.Piso?.Descripcion</div>                <div class="col-md-2"><strong>Precio por noche:</strong><br />$@Model.Recepcion.Habitacion.Precio.ToString("F2")</div>            </div>        </div>    </div>    <div class="card shadow border-0 mb-4">        <div class="card-body">            <h5 class="fw-bold text-primary mb-3">Datos del Cliente</h5>            <div class="row mb-3">                <div class="col-md-3"><strong>Cliente:</strong><br />@Model.Recepcion.ApplicationUser.Nombre @Model.Recepcion.ApplicationUser.Apellido</div>                <div class="col-md-3"><strong>Documento:</strong><br />@Model.Recepcion.ApplicationUser.TipoDocumento: @Model.Recepcion.ApplicationUser.NumeroDocumento</div>                <div class="col-md-3"><strong>Correo:</strong><br />@Model.Recepcion.ApplicationUser.Email</div>            </div>        </div>    </div>    <div class="card shadow border-0 mb-4">        <div class="card-body">            <h5 class="fw-bold text-primary mb-3">Detalles de la Reserva</h5>            <div class="row mb-3">                <div class="col-md-2"><strong>Fecha Entrada:</strong><br />@Model.Recepcion.FechaEntrada.ToShortDateString()</div>                <div class="col-md-2"><strong>Fecha Salida:</strong><br />@DateTime.Now.ToShortDateString()</div>                <div class="col-md-2"><strong>Costo Total:</strong><br />$@Model.Recepcion.PrecioInicial.ToString("F2")</div>                <div class="col-md-2"><strong>Adelanto:</strong><br />$@Model.Recepcion.Adelanto.ToString("F2")</div>                <div class="col-md-2"><strong>Saldo Pendiente:</strong><br />$@totalReserva.ToString("F2")</div>            </div>        </div>    </div>    @if (Model.Ventas != null && Model.Ventas.Any())    {        <div class="card shadow border-0 mb-4">            <div class="card-body">                <h5 class="fw-bold text-primary mb-3">Servicios a la Habitación</h5>                <div class="table-responsive">                    <table class="table table-bordered">                        <thead class="table-dark">                            <tr>                                <th>Producto</th>                                <th>Cantidad</th>                                <th>Precio Unitario</th>                                <th>SubTotal</th>                                <th>Fecha</th>                            </tr>                        </thead>                        <tbody>                            @foreach (var venta in Model.Ventas)                            {                                foreach (var detalle in venta.DetalleVenta)                                {                                    <tr>                                        <td>@detalle.Producto.Nombre</td>                                        <td class="text-center">@detalle.Cantidad</td>                                        <td class="text-end">$@detalle.Producto.Precio.ToString("F2")</td>                                        <td class="text-end">$@detalle.SubTotal.ToString("F2")</td>                                        <td class="text-center">@venta.FechaCreacion.ToShortDateString()</td>                                    </tr>                                }                            }                        </tbody>                        <tfoot>                            <tr>                                <td colspan="3" class="text-end fw-bold">Total ventas:</td>                                <td class="text-end fw-bold" colspan="2">                                    $@Model.TotalVentas.ToString("F2")                                </td>                            </tr>                        </tfoot>                    </table>                </div>            </div>        </div>    }    <div class="card shadow border-0">        <div class="card-body">            <h5 class="fw-bold text-primary mb-3">Registrar Pago y Salida</h5>            <form asp-action="RegistrarSalida" method="post">                @Html.AntiForgeryToken()                <input type="hidden" name="idRecepcion" value="@Model.Recepcion.IdRecepcion" />                <div class="row mb-3">                    <div class="col-md-6">                        <div class="form-group">                            <label class="form-label fw-bold">Total a Pagar:</label>                            <div class="h4 text-primary">$@totalPagar.ToString("F2")</div>                            <input type="hidden" name="totalPagar" value="@totalPagar" />                        </div>                    </div>                    <div class="col-md-6">                        <div class="form-group">                            <label class="form-label fw-bold">Monto Recibido:</label>                            <input type="number" name="montoPagado" class="form-control form-control-lg"                                   step="0.01" min="0" max="@totalPagar"                                   value="@totalPagar" required readonly />                        </div>                    </div>                </div>                <div class="text-end mt-4">                    <a asp-action="Index" class="btn btn-secondary me-2">                        <i class="fas fa-times me-1"></i> Cancelar                    </a>                    <button type="submit" class="btn btn-primary">                        <i class="fas fa-check me-1"></i> Confirmar Pago y Salida                    </button>                </div>            </form>        </div>    </div></div>